$(document).ready(function(){var t=.05,e=0,a=.05,i=.07,o=.05,r=.08,n=.05,s=.0975,d=.05,c=.05,u=.15,h=.14;$(function(){$(".quantity_for_sum").change(),$("#order_prov_state").change(),$(".product").stop(!0,!0)}),$("#order_country").change(function(){$("#order_prov_state").change()}),$(".in_store_delivery_method").change(function(){$(".quantity_for_sum").change(),$(".product").stop(!0,!0)}),$(".shipping_delivery_method").change(function(){$(".quantity_for_sum").change(),$(".product").stop(!0,!0)}),$(".quantity_for_sum").change(function(){$("#order_prov_state").change();var t=0,e="";$(".product_items").each(function(){$this=$(this);var a=+$this.find("#product_price").data("price");if($this.find(".in_store_delivery_method").prop("checked"))var i=$this.find(".in_store_delivery_method").val();else var i=$this.find(".shipping_delivery_method").val();$this.find(".quantity_for_sum").each(function(){return 0!==+this.value?(e+="<h4>"+$this.find("#product_name").data("name")+"</h4> <p> ($"+a.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+")</p><p>"+i+"</p>",!1):void 0}),$this.find(".quantity_for_sum").each(function(){t+=+this.value*a;var i=this.parentNode.getAttribute("data-size"),o=this.parentNode.getAttribute("data-colour");0!==+this.value&&("n/a"!==i&&"n/a"!==o?e+="<p>"+i+", "+o+" X "+ +this.value+"</p>":"n/a"==i&&"n/a"!==o?e+="<p>"+o+" X "+ +this.value+"</p>":"n/a"!==i&&"n/a"==o?e+="<p>"+i+" X "+ +this.value+"</p>":"n/a"==i&&"n/a"==o&&(e+="<p> X "+ +this.value+"</p>"))})}),$(".sub_total").html("$"+t.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),""!==e?$(".product").html(e).effect("highlight",{color:"#006dcc"},2e3):$(".product").html(e)}),$("#order_prov_state").change(function(){$thisOrderProv=this;var _=document.getElementById("order_country"),l=_.options[_.selectedIndex].text,v=0,f=0,p=0;$(".product_items").each(function(){if($this=$(this),"Canada"!=l)var _=1.5;else var _=1;if($this.find(".in_store_delivery_method").prop("checked"))var m=0;else var m=1;var g=+$this.find("#product_shipping").data("shipping")*_*m,b=+$this.find("#product_price").data("price"),y=$this.find("#merchant_state_prov").data("prov");if($this.find(".in_store_delivery_method").prop("checked")?$custProv=$this.find("#merchant_state_prov").data("prov"):$custProv=$thisOrderProv.value,"Alberta"==$custProv&&"Alberta"==y)var P=t+e;else if("British Columbia"==$custProv&&"British Columbia"==y)var P=a+i;else if("Manitoba"==$custProv&&"Manitoba"==y)var P=o+r;else if("Quebec"==$custProv&&"Quebec"==y)var P=n+s;else if("Saskatchewan"==$custProv&&"Saskatchewan"==y)var P=d+c;else if("Alberta"==$custProv&&"Alberta"!=y)var P=t;else if("British Columbia"==$custProv&&"British Columbia"!=y)var P=a;else if("Manitoba"==$custProv&&"Manitoba"!=y)var P=o;else if("Quebec"==$custProv&&"Quebec"!=y)var P=n;else if("Saskatchewan"==$custProv&&"Saskatchewan"!=y)var P=d;else if("New Brunswick"==$custProv||"Newfoundland and Labrador"==$custProv||"Ontario"==$custProv)var P=.13;else if("Nova Scotia"==$custProv)var P=u;else if("Prince Edward Island"==$custProv)var P=h;else if("Northwest Territories"==$custProv||"Nunavut"==$custProv||"Yukon"==$custProv)var P=.05;else var P=0;$this.find(".quantity_for_sum").each(function(){v+=+this.value*g,p+=+this.value*(b+g)*P,f+=+this.value*(b+g)*(P+1)})}),$(".total_shipping").html("$"+v.toFixed(2)),$(".sales_tax_total").html("$"+p.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),$(".total_order_amount").html("<b>$"+f.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")+"</b>"),$("#hiddenTax").val(p),$("#hiddenShipping").val(v),$("#finalTotal").val(f),""==$custProv?($("#order_total_calculation").hide(1e3),$(".total_placeholder").show(1e3)):($(".total_placeholder").hide(1e3),$("#order_total_calculation").show(1e3))}),$("[type='number']").keypress(function(t){t.preventDefault()}),$(".show_comments_form_button").click(function(){var t=$(this).closest(".product_items");t.find(".quantity_and_shipping_form").fadeOut(),t.find(".show_comments_form_button").fadeOut(),t.find(".merchant_comments_form").delay(400).fadeIn(),t.find(".hide_comments_form_button").delay(400).fadeIn()}),$(".hide_comments_form_button").click(function(){var t=$(this).closest(".product_items");t.find(".merchant_comments_form").fadeOut(),t.find(".hide_comments_form_button").fadeOut(),t.find(".quantity_and_shipping_form").delay(400).fadeIn(),t.find(".show_comments_form_button").delay(400).fadeIn()}),$(".quantity_for_sum").each(function(){sessionStorage.getItem($(this).data("unit"))&&(this.value=sessionStorage.getItem($(this).data("unit"))),$(this).change(function(){sessionStorage.setItem($(this).data("unit"),this.value)})})});