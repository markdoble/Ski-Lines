<%= form_for @order, :url => create_payment_order_path(@order) do |f| %>
<div class="row">
    <div class="col-lg-2 col-md-2 col-sm-2 hidden-xs">
    </div>
    <div class="col-lg-8 col-md-8 col-sm-8 col-xs-12">
      <br />
      <% if @order.errors.any? %><br />
        <div id="error_explanation">
          <h2><%= pluralize(@order.errors.count, "error") %> prohibited this order from submitting:</h2>
          <ul>
          <% @order.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
          </ul>
        </div>
      <% end %>
      <div class="braintree_errors">
        <br />
      <h4><%= bootstrap_flash %></h4>
      </div>

      <div class="merchant_order_products">
        <!-- List out the complete order details here -->
      </div>
      <br />
      <div class="col-lg-2 col-md-1 hidden-sm hidden-xs">
      </div>
      <div class="col-lg-8 col-md-10 col-sm-12 col-xs-12">
        <div class="order_form_headings">
          <h2>Complete Payment:</h2>
          <p><i>*Credit card transactions are processed and stored by Braintree, a trusted subsidiary of PayPal.</i></p>
        </div>
        <% @client_token = Braintree::ClientToken.generate %>
        <div id="dropin"></div>
        <div  class="order_form_button">
            <br /><br />
             <%= f.submit "PURCHASE", class: "btn btn-primary btn-large purchase_button" %>
             <br /><br /><br /><br />
             <br /><br /><br /><br />
             <br /><br /><br /><br />
             <br /><br /><br /><br />
             <br /><br /><br /><br />
        </div>
      </div>
      <div class="col-lg-2 col-md-1 hidden-sm hidden-xs">
      </div>
    </div>
    <div class="col-lg-2 col-md-2 col-sm-2 hidden-xs">
    </div>
</div>
<%end%>
<script type="text/javascript">
  function setupBT() {
    braintree.setup("<%=@client_token%>", 'dropin', {
      container: 'dropin'
    });
  }
  if (window.addEventListener)
    window.addEventListener("load", setupBT, false);
  else if (window.attachEvent)
    window.attachEvent("onload", setupBT);
  else window.onload = setupBT;
</script>
